(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{v5UV:function(e,t,n){"use strict";n.r(t),n.d(t,"PurchaseByStoreModule",(function(){return w}));var r=n("ofXK"),c=n("tyNb"),o=n("fXoL"),a=n("lgOS"),s=n("mrSG"),l=n("iD3B"),u=n("5eHb"),i=n("Mfq2"),b=n("AhLa"),p=n("jt5H");function d(e,t){1&e&&(o.Ob(0,"tr"),o.Ob(1,"td",9),o.xc(2,"There are no purchase yet."),o.Nb(),o.Nb())}var y=function(e,t){return[e,t]};function f(e,t){if(1&e&&(o.Ob(0,"tr"),o.Ob(1,"td",11),o.Ob(2,"span",12),o.xc(3),o.Nb(),o.Nb(),o.Ob(4,"td",13),o.Ob(5,"span",12),o.xc(6),o.Nb(),o.Nb(),o.Ob(7,"td",14),o.Ob(8,"span",12),o.Yb(9,"currency"),o.Yb(10,"currencyExchange"),o.xc(11),o.Yb(12,"currency"),o.Yb(13,"currencyExchange"),o.Nb(),o.Nb(),o.Nb()),2&e){var n=t.$implicit,r=o.Xb(2);o.xb(2),o.dc("tooltip",null==n?null:n.name),o.xb(1),o.yc(null==n?null:n.name),o.xb(2),o.dc("tooltip",null==n?null:n.quantity),o.xb(1),o.yc(null==n?null:n.quantity),o.xb(2),o.dc("tooltip",o.ac(9,6,o.ac(10,9,null==n?null:n.price,o.hc(18,y,null==r.defaultCurrency?null:r.defaultCurrency.rate,null==r.selectedCurrency?null:r.selectedCurrency.rate)),r.selectedCurrency.name)),o.xb(3),o.zc(" ",o.ac(12,12,o.ac(13,15,null==n?null:n.price,o.hc(21,y,null==r.defaultCurrency?null:r.defaultCurrency.rate,null==r.selectedCurrency?null:r.selectedCurrency.rate)),r.selectedCurrency.name)," ")}}function h(e,t){if(1&e&&o.vc(0,f,14,24,"tr",10),2&e){var n=o.Xb();o.dc("ngForOf",n.storesSum)}}function m(e,t){if(1&e&&(o.Ob(0,"tfoot",15),o.Ob(1,"tr"),o.Kb(2,"td",16),o.Ob(3,"td",17),o.Ob(4,"span",12),o.Yb(5,"currency"),o.Yb(6,"fieldSum"),o.xc(7),o.Yb(8,"currency"),o.Yb(9,"fieldSum"),o.Nb(),o.Nb(),o.Nb(),o.Nb()),2&e){var n=o.Xb();o.xb(4),o.dc("tooltip",o.ac(5,2,o.ac(6,5,n.storesSum,"price"),n.selectedCurrency.name)),o.xb(3),o.zc(" Sum: ",o.ac(8,8,o.ac(9,11,n.storesSum,"price"),n.selectedCurrency.name)," ")}}var g=function(){function e(e,t,n){this.user=e,this.toastr=t,this.appService=n}return e.prototype.ngOnInit=function(){var e=this;this.user.getAllStates().subscribe((function(t){e.selectedCurrency=t.selectedCurrency,e.defaultCurrency=t.defaultCurrency,e.storesSum=e.getStoresSum(t)}),(function(){e.toastr.error("Oops...something went wrong.","Error!")}))},e.prototype.getStoresSum=function(e){var t=[],n=e.archiveItems,r=e.waitingItems,c=Object(s.d)(r,n);if(null==c?void 0:c.length){var o=this.appService.groupByKey(c,"store");Object.keys(o).map((function(e){t.push({name:e,quantity:o[e].length,price:o[e].reduce((function(e,t){return(null==t?void 0:t.price)+e}),0)})}))}return t},e.\u0275fac=function(t){return new(t||e)(o.Jb(l.a),o.Jb(u.b),o.Jb(a.a))},e.\u0275cmp=o.Db({type:e,selectors:[["app-purchase-by-store-table"]],decls:15,vars:3,consts:[[1,"purchase-by-store-table-wrapper"],[1,"table","table-responsive-sm","table-hover"],[1,"table-primary"],["scope","col",1,"store-name-header"],["scope","col",1,"quantity-header"],["scope","col",1,"price-header"],[4,"ngIf","ngIfElse"],["purchaseByStoreTableTemplate",""],["class","font-weight-bold bg-light",4,"ngIf"],["colspan","5"],[4,"ngFor","ngForOf"],[1,"ellipsis-text","store-name"],[3,"tooltip"],[1,"ellipsis-text","quantity"],[1,"ellipsis-text","price"],[1,"font-weight-bold","bg-light"],["colspan","2"],["colspan","1"]],template:function(e,t){if(1&e&&(o.Ob(0,"div",0),o.Ob(1,"table",1),o.Ob(2,"thead"),o.Ob(3,"tr",2),o.Ob(4,"th",3),o.xc(5,"Store name"),o.Nb(),o.Ob(6,"th",4),o.xc(7,"Quantity"),o.Nb(),o.Ob(8,"th",5),o.xc(9,"Price"),o.Nb(),o.Nb(),o.Nb(),o.Ob(10,"tbody"),o.vc(11,d,3,0,"tr",6),o.vc(12,h,1,1,"ng-template",null,7,o.wc),o.Nb(),o.vc(14,m,10,14,"tfoot",8),o.Nb(),o.Nb()),2&e){var n=o.lc(13);o.xb(11),o.dc("ngIf",t.storesSum&&0===(null==t.storesSum?null:t.storesSum.length))("ngIfElse",n),o.xb(3),o.dc("ngIf",t.storesSum&&(null==t.storesSum?null:t.storesSum.length)>0)}},directives:[r.m,r.l,i.a],pipes:[r.d,b.a,p.a],styles:[".purchase-by-store-table-wrapper[_ngcontent-%COMP%]   .store-name-header[_ngcontent-%COMP%]{width:600px}.purchase-by-store-table-wrapper[_ngcontent-%COMP%]   .price-header[_ngcontent-%COMP%], .purchase-by-store-table-wrapper[_ngcontent-%COMP%]   .quantity-header[_ngcontent-%COMP%]{width:300px}.purchase-by-store-table-wrapper[_ngcontent-%COMP%]   .ellipsis-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.purchase-by-store-table-wrapper[_ngcontent-%COMP%]   .ellipsis-text.store-name[_ngcontent-%COMP%]{max-width:600px}.purchase-by-store-table-wrapper[_ngcontent-%COMP%]   .ellipsis-text.price[_ngcontent-%COMP%], .purchase-by-store-table-wrapper[_ngcontent-%COMP%]   .ellipsis-text.quantity[_ngcontent-%COMP%]{max-width:300px}"]}),e}(),O=[{path:"",component:function(){function e(e){this.appService=e}return e.prototype.ngOnInit=function(){var e=this;setTimeout((function(){e.appService.pageTitle="Purchase by store"}),0)},e.\u0275fac=function(t){return new(t||e)(o.Jb(a.a))},e.\u0275cmp=o.Db({type:e,selectors:[["app-purchase-by-store"]],decls:2,vars:0,consts:[[1,"purchase-by-store-wrapper"]],template:function(e,t){1&e&&(o.Ob(0,"div",0),o.Kb(1,"app-purchase-by-store-table"),o.Nb())},directives:[g],styles:[""]}),e}()},{path:"**",redirectTo:""}],x=function(){function e(){}return e.\u0275mod=o.Hb({type:e}),e.\u0275inj=o.Gb({factory:function(t){return new(t||e)},imports:[[c.c.forChild(O)]]}),e}(),v=n("PCNd"),w=function(){function e(){}return e.\u0275mod=o.Hb({type:e}),e.\u0275inj=o.Gb({factory:function(t){return new(t||e)},imports:[[r.c,x,i.b,v.a]]}),e}()}}]);